{%- assign lang_code = request.locale.iso_code | slice: 0,2 -%}
<!doctype html>
<html
  class="no-js"
  lang="{{ request.locale.iso_code }}"
  dir="{%- if lang_code == 'ar'      # Arabic (ar-SA, ar-EG, ar-AE, ...)
          or lang_code == 'he'       # Hebrew (he-IL)
          or lang_code == 'fa'       # Persian / Farsi (fa-IR)
          or lang_code == 'ur'       # Urdu (ur-PK, ur-IN)
          or lang_code == 'ps'       # Pashto (ps-AF)
          or lang_code == 'sd'       # Sindhi (sd-PK, sd-IN)
          or lang_code == 'dv'       # Dhivehi / Maldivian (dv-MV)
          or lang_code == 'ug'       # Uyghur (ug-CN)
          or lang_code == 'yi'       # Yiddish (yi-001)
  -%}
    rtl
  {%- else -%}
    ltr
  {%- endif -%}"
>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="">
    <link rel="canonical" href="{{ canonical_url }}">
    <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>

    {%- if settings.favicon != blank -%}
      <link rel="icon" type="image/png" sizes="32x32" href="{{ settings.favicon | image_url: width: 32, height: 32 }}">
      <link rel="icon" type="image/png" sizes="192x192" href="{{ settings.favicon | image_url: width: 192, height: 192 }}">
      <link rel="icon" type="image/png" sizes="512x512" href="{{ settings.favicon | image_url: width: 512, height: 512 }}">
    {%- endif -%}

    {%- unless settings.type_header_font.system? and settings.type_body_font.system? -%}
      <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
    {%- endunless -%}

    <title>{{ page_title }}</title>

    {% if page_description %}
      <meta name="description" content="{{ page_description | escape }}">
    {% endif %}

    {% render 'meta-tags' %}

    {{ 'swiper.css' | asset_url | stylesheet_tag: preload: true }}

    {{ 'settings.css' | asset_url | stylesheet_tag }}
    {{ 'critical.css' | asset_url | stylesheet_tag }}

    <script src="{{ 'variants.js' | asset_url }}" defer="defer"></script>

    <link rel="preload" href="{{ 'main.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{ 'main.css' | asset_url }}"></noscript>
    {{ 'custom.css' | asset_url | stylesheet_tag }}

    <script src="{{ 'constants.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'pubsub.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'global.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'base.js' | asset_url }}" defer="defer"></script>

    <script src="{{ 'color-swatch.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'localization-form.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'animations.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'drawer-select.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'model_element.js' | asset_url }}" defer="defer"></script>

    {%- if template == 'product' -%}
      <script type="module" src="{{ 'gallery.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {{ content_for_header }}

    {%- liquid
      assign body_font_bold = settings.type_body_font | font_modify: 'weight', 'bold'
      assign body_font_italic = settings.type_body_font | font_modify: 'style', 'italic'
      assign body_font_bold_italic = body_font_bold | font_modify: 'style', 'italic'
    %}

    {% style %}  
      /* custom fontfaces/imports */
      {{ settings.fontfaces }}

      /* default fonts */
      {{ settings.type_body_font | font_face: font_display: 'swap' }}
      {{ body_font_bold | font_face: font_display: 'swap' }}
      {{ body_font_italic | font_face: font_display: 'swap' }}
      {{ body_font_bold_italic | font_face: font_display: 'swap' }}
      {{ settings.type_headings_font | font_face: font_display: 'swap' }}
      {{ settings.type_navigation_font | font_face: font_display: 'swap' }}
      {{ settings.type_buttons_font | font_face: font_display: 'swap' }}
      {{ settings.type_price_font | font_face: font_display: 'swap' }}
      {{ settings.type_breadcrumbs_font | font_face: font_display: 'swap' }}

      @font-face {
        font-family: 'icomoon';
        src:  url('{{ 'icomoon.eot' | asset_url }}?6k4fkf');
        src:  url('{{ 'icomoon.eot' | asset_url }}?6k4fkf#iefix') format('embedded-opentype'),
          url('{{ 'icomoon.ttf' | asset_url }}?6k4fkf') format('truetype'),
          url('{{ 'icomoon.woff' | asset_url }}?6k4fkf') format('woff'),
          url('{{ 'icomoon.svg' | asset_url }}?6k4fkf#icomoon') format('svg');
        font-weight: normal;
        font-style: normal;
        font-display: block;
      }

      /* override fonts */
      body{
        {%- if settings.custom_font_base != blank -%}
          --font-base: {{ settings.custom_font_base }},{{ settings.type_body_font.family }},{{ settings.type_body_font.fallback_families }};
        {%- endif -%}
        {%- if settings.custom_font_base_weight != blank -%}
          --font-base-weight: {{ settings.custom_font_base_weight }};
        {%- endif -%}

        {%- if settings.custom_font_heading != blank -%}
          --font-headline: {{ settings.custom_font_heading }},{{ settings.type_headings_font.family }},{{ settings.type_headings_font.fallback_families }};
        {%- endif -%}
        {%- if settings.custom_font_heading_weight != blank -%}
          --font-headline-weight: {{ settings.custom_font_heading_weight }};
        {%- endif -%}

        {%- if settings.custom_font_navigation != blank -%}
          --font-navigation: {{ settings.custom_font_navigation }},{{ settings.type_navigation_font.family }},{{ settings.type_navigation_font.fallback_families }};
        {%- endif -%}

        {%- if settings.custom_font_navigation_weight != blank -%}
          --font-navigation-weight: {{ settings.custom_font_navigation_weight }};
        {%- endif -%}

        {%- if settings.custom_font_button != blank -%}
          --font-button: {{ settings.custom_font_button }},{{ settings.type_buttons_font.family }},{{ settings.type_buttons_font.fallback_families }};
        {%- endif -%}

        {%- if settings.custom_font_button_weight != blank -%}
          --font-button-weight: {{ settings.custom_font_button_weight }};
        {%- endif -%}

        {%- if settings.custom_font_price != blank -%}  
          --font-price: {{ settings.custom_font_price }},{{ settings.type_price_font.family }},{{ settings.type_price_font.fallback_families }};
        {%- endif -%}

        {%- if settings.custom_font_price_weight != blank -%}  
          --font-price-weight: {{ settings.custom_font_price_weight }};
        {%- endif -%}
      }

    {% endstyle %}
    <style>
      [data-custom-badge="{{ settings.custom-badge-1-input }}"]{
        background-color: {{ settings.custom-badge-1-background }};
        color: {{ settings.custom-badge-1-text }};
        }
      [data-custom-badge="{{ settings.custom-badge-2-input }}"]{
        background-color: {{ settings.custom-badge-2-background }};
        color: {{ settings.custom-badge-2-text }};
        }
      [data-custom-badge="{{ settings.custom-badge-3-input }}"]{
        background-color: {{ settings.custom-badge-3-background }};
        color: {{ settings.custom-badge-3-text }};
        }
      [data-custom-badge="{{ settings.custom-badge-4-input }}"]{
        background-color: {{ settings.custom-badge-4-background }};
        color: {{ settings.custom-badge-4-text }};
        }
    </style>

    {%- unless settings.type_body_font.system? -%}
      <link rel="preload" as="font" href="{{ settings.type_body_font | font_url }}" type="font/woff2" crossorigin>
    {%- endunless -%}
    {%- unless settings.type_headings_font.system? -%}
      <link rel="preload" as="font" href="{{ settings.type_headings_font | font_url }}" type="font/woff2" crossorigin>
    {%- endunless -%}
    {%- unless settings.type_navigation_font.system? -%}
      <link rel="preload" as="font" href="{{ settings.type_navigation_font | font_url }}" type="font/woff2" crossorigin>
    {%- endunless -%}
    {%- unless settings.type_buttons_font.system? -%}
      <link rel="preload" as="font" href="{{ settings.type_buttons_font | font_url }}" type="font/woff2" crossorigin>
    {%- endunless -%}
    {%- unless settings.type_price_font.system? -%}
      <link rel="preload" as="font" href="{{ settings.type_price_font | font_url }}" type="font/woff2" crossorigin>
    {%- endunless -%}
    {% comment %}
      {%- unless settings.type_breadcrumbs_font.system? -%}
        <link
          rel="preload"
          as="font"
          href="{{ settings.type_breadcrumbs_font | font_url }}"
          type="font/woff2"
          crossorigin
        >
      {%- endunless -%}
    {% endcomment %}

    <script>
      document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R0K0W5HGZ4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());  gtag('config', 'G-R0K0W5HGZ4');
    </script>
  </head>

  {% assign template_name = template | handleize %}
  {% if template_name.size < 1 %}
    {% assign template_name = 'empty' | handleize %}
  {% endif %}

  <body class="template-{{ template_name }} nav-drawer-big mobile-nav" {% if settings.animations_pictures %}data-animate-picures-onhover{% endif %}>
    <a href="#root" class="skip-to-content-link">{{ 'accessibility.skip_to_text' | t }}</a>
    {% if settings.sticky_header %}<div class="sticky-header__threshold"></div>{% endif %}
    {% sections 'header-group' %}

    <main id="root" class="" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>

    {% sections 'footer-group' %}

    {% if template != 'cart' %}
      {% render 'cart-drawer' %}
    {% else %}
      <script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>
    {% endif %}

    {% render 'localization-drawer' %}

    <ul hidden>
      <li id="a11y-refresh-page-message">{{ 'accessibility.refresh_page' | t }}</li>
    </ul>

    <script>
      window.shopUrl = '{{ request.origin }}';
      window.routes = {
        cart_add_url: '{{ routes.cart_add_url }}',
        cart_change_url: '{{ routes.cart_change_url }}',
        cart_update_url: '{{ routes.cart_update_url }}',
        cart_url: '{{ routes.cart_url }}',
        predictive_search_url: '{{ routes.predictive_search_url }}',
      };

      window.cartStrings = {
        error: `{{ 'sections.cart.cart_error' | t }}`,
        quantityError: `{{ 'sections.cart.cart_quantity_error_html' | t: quantity: '[quantity]' }}`,
      };

      window.variantStrings = {
        addToCart: `{{ 'products.product.add_to_cart' | t }}`,
        soldOut: `{{ 'products.product.sold_out' | t }}`,
        unavailable: `{{ 'products.product.unavailable' | t }}`,
        unavailable_with_option: `{{ 'products.product.value_unavailable' | t: option_value: '[value]' }}`,
      };

      window.accessibilityStrings = {
        imageAvailable: `{{ 'products.product.media.image_available' | t: index: '[index]' }}`,
        shareSuccess: `{{ 'general.share.success_message' | t }}`,
        pauseSlideshow: `{{ 'sections.slideshow.pause_slideshow' | t }}`,
        playSlideshow: `{{ 'sections.slideshow.play_slideshow' | t }}`,
        recipientFormExpanded: `{{ 'recipient.form.expanded' | t }}`,
        recipientFormCollapsed: `{{ 'recipient.form.collapsed' | t }}`,
      };
    </script>


    <div class="pickup-availability--page-overlay"></div>
    <div class="wt__quick-buy--page-overlay"></div>
    <div class="wt__quick-buy">
      <div class="wt__quick-buy__container">
        <nav>
          <div class="close-btn" role="button" aria-label="{{ 'aria-label.close-button' | t }}" tabindex="-1">
            {% render 'icons', id: 'close' %}
          </div>
        </nav>
        <div class="wt__quick-buy--wrapper">
          <div class="wt__quick-buy-loader">
            {% render 'loader' %}
          </div>
          <div class="wt__quick-buy__view-all-container hidden">
            <a href="#">
              {{ 'general.quick_add.view_all_details' | t }}
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="model-container hidden">
      <nav>
        <div class="close-btn" role="button" aria-label="{{ 'aria-label.close-button' | t }}" tabindex="-1">
          {% render 'icons', id: 'close', icon_class: 'wt-cart__drawer__close' %}
        </div>
      </nav>
      <div class="model">
        <button class="hero__button--link" role="button" aria-label="{{ 'aria-label.back-button' | t }}">
          <span>
            {{ 'aria-label.back-button' | t }}
          </span>
        </button>
      </div>
    </div>
    {% if request.design_mode %}
      <script src="{{ 'parallax.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'page-header-logo-banner.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'page-header-image-banner.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'low-power-video.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'video-controls.js' | asset_url }}" defer="defer"></script>
      <script type="module" src="{{ 'pdp.js' | asset_url }}" defer="defer"></script>
      <script type="module" src="{{ 'gallery.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'countdown-timer.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'img-comparison-slider-v8.js' | asset_url }}" defer="defer"></script>
    {% endif %}
    <!-- Wonder Theme v2.1.0 -->
     <script>
      const btnvdcontrol = document.querySelector('.shoppable-video__control-button');
      const btnvdcontrolpause = document.querySelector('.shoppable-video__control-button--play');

      if (btnvdcontrol && btnvdcontrolpause) {
        btnvdcontrol.addEventListener('click', () => {
          // Toggle opacity
          if (btnvdcontrolpause.style.opacity === '0') {
            btnvdcontrolpause.style.opacity = '1'; // Make it visible
          } else {
            setTimeout(function(){
            btnvdcontrolpause.style.opacity = '0'; // Make it invisible
            
            }, 2000);
          }
        });
      } else {
        console.error('Button elements not found');
      }
    </script>
       <script>
        document.addEventListener('DOMContentLoaded', function() {
          const announcementBar = document.querySelector('.wt-announcement-bar');
          const closeBtn = document.querySelector('.newsletter__close-btn');
          const section = document.querySelector('.not-pu-section');

          if (announcementBar && section) {
            announcementBar.addEventListener('click', () => section.classList.toggle('hidden'));
            announcementBar.addEventListener('click', () => section.classList.remove('popup-hidden-newsletter'));
          }

          if (closeBtn && section) {
            closeBtn.addEventListener('click', () => section.classList.add('hidden'));
            closeBtn.addEventListener('click', () => section.classList.add('popup-hidden-newsletter'));
          }
        });
    </script>

    <style>
.stickerbox-disabled {
  opacity: 0.5;
  pointer-events: none;
}
</style>







<script>
(function() {

  const STICKERBOX_VARIANT_ID = {{ settings.customer-buy.selected_or_first_available_variant.id }};
  const PAPER_REFILL_VARIANT_ID = {{ settings.customer-get.selected_or_first_available_variant.id }};
  const DISCOUNT_TITLE_TO_REMOVE = "FREE3PACK";

  function showItemLoader(element) {
    const item = element.closest('.cart-item');
    if (!item) return;
    const loader = item.querySelector('.loading-overlay');
    if (loader) loader.classList.remove('hidden');
  }

  function hideItemLoader(element) {
    const item = element.closest('.cart-item');
    if (!item) return;
    const loader = item.querySelector('.loading-overlay');
    if (loader) loader.classList.add('hidden');
  }

  async function addToCartAndRefresh(form) {
    const variantId = form.querySelector('[name="id"]').value;
    if (variantId == STICKERBOX_VARIANT_ID) {
      const qtyInput = form.querySelector('[name="quantity"]');
      const stickerboxQty = qtyInput ? parseInt(qtyInput.value) : 1;

      try {
        await fetch('/cart/add.js', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ id: STICKERBOX_VARIANT_ID, quantity: stickerboxQty })
        });

        await fetch('/cart/add.js', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ id: PAPER_REFILL_VARIANT_ID, quantity: stickerboxQty })
        });

        await updateCartDrawer();

      } catch (error) {
        console.error('Error adding products:', error);
      }
    }
  }

  async function updateCartDrawer() {
    try {
      const cart = await fetch('/cart.js').then(r => r.json());

      const bubble = document.querySelector('#cart-icon-bubble span');
      if (bubble) bubble.textContent = cart.item_count;

      document.querySelector('.main-hidden-cart-counter')?.classList.add('hidden-cart-counter');
      document.querySelector('.wt-cart__trigger')?.click();

      const html = await fetch('/?section_id=cart-drawer').then(r => r.text());
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');

      const newDrawer = doc.querySelector('#CartDrawer');
      const currentDrawer = document.querySelector('#CartDrawer');
      if (newDrawer && currentDrawer) currentDrawer.innerHTML = newDrawer.innerHTML;

      document.querySelector('cart-drawer')?.classList.add('is-open');
      document.dispatchEvent(new CustomEvent("cart:updated"));

    } catch (error) {
      console.error('Error updating cart drawer:', error);
    }
  }

  async function removeItemsWithDiscountTitle(discountTitle) {
    try {
      const cart = await fetch('/cart.js').then(r => r.json());

      const itemsToRemove = cart.items.filter(item => {
        const hasDiscount = item.discounts?.some(d => d.title === discountTitle)
          || item.line_level_discount_allocations?.some(d => d.discount_application?.title === discountTitle);
        return hasDiscount;
      });

      if (itemsToRemove.length === 0) return;

      const updates = {};
      itemsToRemove.forEach(item => updates[item.key] = 0); // MUST use item.key

      await fetch('/cart/update.js', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ updates })
      });

      await updateCartDrawer();

    } catch (err) {
      console.error('Error removing discounted items:', err);
    }
  }

  document.addEventListener("submit", function(e) {
    const form = e.target;
    if (form.classList.contains("main-sticker-form")) {
      e.preventDefault();
      e.stopImmediatePropagation();
      e.stopPropagation();
      addToCartAndRefresh(form);
    }
  }, true);

  document.addEventListener('click', function(e) {
    const trigger = e.target.closest(".plus-cart-btn");
    if (!trigger) return;
    showItemLoader(trigger);
    const wrapper = trigger.closest("quantity-counter");
    if (!wrapper) return console.error("No quantity-counter wrapper found");
    const input = wrapper.querySelector(".js-counter-quantity");
    if (!input) return console.error("No quantity input found");
    const variantId = input.dataset.quantityVariantId;
    const quantity = 1;

    addToCartAndRefresh({
      querySelector: (selector) => {
        if (selector === '[name="id"]') return { value: variantId };
        if (selector === '[name="quantity"]') return { value: quantity };
        return null;
      }
    });
  });

document.addEventListener('click', function(e) {
  const triggerminus = e.target.closest(".minus-cart-btn");
  if (!triggerminus) return;

  showItemLoader(triggerminus);

  (async ()  => {
    try {
      const cart = await fetch('/cart.js').then(r => r.json());
      const updates = {};

      cart.items.forEach(item => {
        const hasDiscount = item.discounts?.some(d => d.title === "FREE3PACK") 
          || item.line_level_discount_allocations?.some(d => d.discount_application?.title === "FREE3PACK");

        if (hasDiscount) {
          console.log(item);
          updates[item.id] = Math.max(item.quantity - 1, 0);
        }
      });

      if (Object.keys(updates).length === 0) return;

      await fetch('/cart/update.js', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ updates })
      });
      console.log(updates);
      await updateCartDrawer();
    } catch (error) {
      console.error('Error decreasing products:', error);
    } finally {
      hideItemLoader(triggerminus);
    }
  })();
});



  // Remove sticker products by variant OR discount
  document.addEventListener('click', async function(e) {
    if (!e.target.classList.contains('remove-sticker-products')) return;

    showItemLoader(e.target);
    try {
      await removeItemsWithDiscountTitle(DISCOUNT_TITLE_TO_REMOVE);
    } finally {
      hideItemLoader(e.target);
    }
  });

})();

</script>


<script>
document.addEventListener('DOMContentLoaded', () => {
  setInterval(() => {
    let totalQty = 0;
    let maxQty = null;
    const addBtn = document.querySelector("[sticker-refills][data-add-product-id]");
    const quantityBtn = document.querySelector(".wt-featured-product-main quantity-counter.counter-wrapper");
    const countersinput = document.querySelector('.wt-featured-product-main .js-counter-quantity');

    if (!addBtn) return;
    const productId = addBtn.dataset.addProductId;
    const cartItems = document.querySelectorAll(`cart-drawer-items li[data-product="${productId}"]`);
    cartItems.forEach(item => {
      const input = item.querySelector("cart-drawer-items input.js-counter-quantity");
      if (input) {
        const qtyy = parseInt(input.value, 10);
        const maxx = parseInt(input.getAttribute("max"), 10);
        totalQty += qtyy;
        if (!maxQty) maxQty = maxx;
      }
    });
    if (maxQty !== null && totalQty >= 2) {
      addBtn.disabled = true;
      addBtn.classList.add("disabled");
    } else {
      addBtn.disabled = false;
      addBtn.classList.remove("disabled");
    }
    if (maxQty !== null && totalQty === 1) {
      quantityBtn.classList.add("disabled-button");
      if (countersinput) {
        countersinput.value = 1;
        countersinput.dispatchEvent(new Event('change', { bubbles: true }));
      }
    } else {
      quantityBtn.classList.remove("disabled-button");
    }
  }, 100); 

});
</script>

  </body>
</html>
